/*!
 * angular-typeaheadjs v0.10.0
 * https://github.com/borntorun/angular-typeaheadjs
 * Copyright 2016 Jo√£o Carvalho <jmmtcarvalho@gmail.com>; Licensed MIT
 */

!function(){"use strict";function a(a,b){function c(c,f,g,q){function r(a,b,c,d){var e=a.$on(c,function(a,c){b.attr("class").indexOf("tt-input")!==-1&&(b.typeahead("val",c),d&&e())});return e}function s(a,b,c,d){C.push({el:a,name:b,opt:c,handler:d}),a.on(b,c,d)}function t(a,b){for(var d=0;d<b.length;d++){var e=b[d],f=i(e.trigger)?e.trigger:u((e.trigger||e.event).replace("$","")),g=f!==angular.noop;g&&s(a,e.event.replace(/\$/g,"typeahead:"),A,f);var h=i(e.trigger)?angular.noop:u("before"+(e.trigger||e.event).replace("$",""));h!==angular.noop?s(a,e.event.replace(/\$/g,"typeahead:before"),A,h):A.setSameListenerEventBefore===!0&&g&&s(a,e.event.replace(/\$/g,"typeahead:before"),A,f)}C.length>0&&c.$on("$destroy",function(){C.forEach(function(a){try{a.el.off(a.name,a.handler)}catch(b){}})})}function u(a){var b=c.$eval(c["angtyOn"+a]);return i(b)?function(){b.apply(null,[].slice.call(arguments))}:A.emitOnlyIfPresent===!1||g.$attr.hasOwnProperty("angtyOn"+a)?function(){var b=[].slice.call(arguments),d=arguments[0].target;b.push({id:d.id,name:d.name,value:d.value}),c.$emit("typeahead:"+a,b)}:angular.noop}function v(a,c,f,g){function i(){return q=d({highlight:null,hint:null,minLength:null,classNames:null},c),k(f)===!0?void s.resolve(m(a,q,f)):h(f)===!0?void s.reject("angty-ttdatasets must be an array."):n(c)===!1?void s.reject("One of attributes [remote|prefetch] is required."):(p=d({sufficient:null,remote:null,prefetch:null},c),p.remote&&(l(p.remote)&&(p.remote={url:p.remote}),p.remote.wildcard=p.remote.wildcard||"%QUERY"),p=angular.extend(p,{initialize:!1,identify:g&&g.identify?g.identify:function(a){return a[c.display]},sorter:g&&g.sorter?g.sorter:void 0,datumTokenizer:Bloodhound.tokenizers.obj.whitespace(c.display),queryTokenizer:Bloodhound.tokenizers.whitespace}),o=d({name:null,limit:null,display:null},c),o.source=r=new Bloodhound(p),void r.initialize().done(function(){s.resolve(m(a,q,o))}).fail(function(){s.reject("engine.initialize failed.")}))}function m(a,b,c){return a.typeahead(b,c)}function n(a){var b=h(a.remote)&&(e(a.remote)||j(a.remote)&&e(a.remote.url)),c=h(a.prefetch)&&e(a.prefetch);return c||b}var o,p,q,r,s=b.defer();return setTimeout(function(){i()},0),s.promise}var w,x,y,z,A,B,C=[];if(A=c.$eval(c.angtyOptions),w=c.$eval(c.angtyTtoptions),x=c.$eval(c.angtyTtdatasets),y=c.$eval(c.angtyBhfunctions),A=angular.extend(angular.copy(o),A||{}),z=angular.extend(A.useOwnDefaults?angular.copy(p):{},w||{}),0===(B=f.find(".typeahead")).length)return void(A.showLog&&m('No element with ".typeahead" found to apply.',g.id));var D=[],E=B.attr("id")||B.attr("name");E?(A.watchInitEvent===!0&&D.push(r(c.$parent,B,"angtty:init:"+E,!0)),A.watchSetValEvent===!0&&D.push(r(c.$parent,B,"angtty:setval:"+E,!1)),D.length>0&&c.$parent.$on("$destroy",function(){D.forEach(function(b){try{b&&b()}catch(c){a(c)}})})):A.showLog&&m('Input element has no "id" or "name" attribute.',g.id);var F=v(B,z,x,y);F.then(function(a){function b(){a.typeahead("val","")}var c=angular.copy(n);A.selectOnAutocomplete===!0?(c.push({event:"$autocomplete $select",trigger:"select"}),A.clear===!0&&c.push({event:"$autocomplete $select",trigger:b})):(c.push({event:"$select"}),A.clear===!0&&c.push({event:"$select",trigger:b})),t(a,c)})["catch"](function(a){A.showLog&&m(a,B[0].id)})}function d(a,b){var c={};for(var d in a)g(b[d])||(c[d]=b[d]);return c}function e(a){return l(a)&&!f(a)}function f(a){return/^\s*$/.test(a)}function g(a){return"undefined"==typeof a}function h(a){return"undefined"!=typeof a}function i(a){return"[object Function]"==={}.toString.call(a)}function j(a){return"object"==typeof a&&null!==a}function k(a){return"[object Array]"===Object.prototype.toString.call(a)}function l(a){return"string"==typeof a}function m(b,c){a.error(b+"([angular-typeaheadjs]:id:"+c+")")}var n=[{event:"$active"},{event:"$idle"},{event:"$open"},{event:"$close"},{event:"$change"},{event:"$render"},{event:"$autocomplete"},{event:"$cursorchange"},{event:"$asyncrequest"},{event:"$asynccancel"},{event:"$asyncreceive"}],o={useOwnDefaults:!0,selectOnAutocomplete:!1,clear:!1,emitOnlyIfPresent:!0,showLog:!1,watchInitEvent:!1,watchSetValEvent:!1},p={highlight:!0,hint:!0,minLength:3,display:"name",limit:10,sufficient:10},q={restrict:"ACE",scope:{angtyOptions:"@?",angtyTtoptions:"@?",angtyTtdatasets:"&?",angtyOnactive:"&?",angtyOnidle:"&?",angtyOnopen:"&?",angtyOnclose:"&?",angtyOnchange:"&?",angtyOnrender:"&?",angtyOnselect:"&?",angtyOnautocomplete:"&?",angtyOncursorchange:"&?",angtyOnasyncrequest:"&?",angtyOnasynccancel:"&?",angtyOnasyncreceive:"&?",angtyOnbeforeactive:"&?",angtyOnbeforeidle:"&?",angtyOnbeforeopen:"&?",angtyOnbeforeclose:"&?",angtyOnbeforeautocomplete:"&?",angtyOnbeforecursorchange:"&?",angtyOnbeforeselect:"&?",ngModel:"=?",angtyBhfunctions:"&?"},link:c};return q}a.$inject=["$log","Q"],angular.module("angularTypeaheadjs",[]).constant("Q",Q).directive("angularTypeaheadjs",a)}();
